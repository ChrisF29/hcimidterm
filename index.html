<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>IT Equipment Inventory - Kuya Dante's Dashboard</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Main Container -->
    <div class="app-container">
        
        <!-- Header Section -->
        <header class="app-header">
            <div class="header-left">
                <h1>üõ†Ô∏è IT Equipment Inventory</h1>
                <p class="subtitle">Room 209 & 210 - Equipment Health Dashboard</p>
            </div>
            <div class="header-right">
                <div class="user-info">
                    <span class="user-icon">üë§</span>
                    <span class="user-name">Kuya Dante</span>
                </div>
                <button class="btn-icon" id="btnRefresh" title="Refresh Dashboard">
                    üîÑ
                </button>
            </div>
        </header>

        <!-- Alert Banner for Low Stock & Overdue Items -->
        <div class="alert-banner" id="alertBanner" style="display: none;">
            <div class="alert-content">
                <span class="alert-icon">‚ö†Ô∏è</span>
                <span class="alert-message" id="alertMessage"></span>
                <button class="btn-close-alert" onclick="closeAlert()">‚úñ</button>
            </div>
        </div>

        <!-- Universal Search Bar -->
        <section class="search-section">
            <div class="search-container">
                <input 
                    type="text" 
                    id="universalSearch" 
                    class="search-input" 
                    placeholder="üîç Search by Student Name or Item Name..."
                    autocomplete="off"
                >
                <button class="btn-clear-search" id="btnClearSearch" style="display: none;">‚úñ</button>
            </div>
            <div class="search-filter-chips">
                <button class="filter-chip active" data-filter="all">All Items</button>
                <button class="filter-chip" data-filter="good">‚úÖ Good</button>
                <button class="filter-chip" data-filter="warning">‚ö†Ô∏è Warning</button>
                <button class="filter-chip" data-filter="defective">‚ùå Defective</button>
                <button class="filter-chip" data-filter="borrowed">üì§ Borrowed</button>
            </div>
        </section>

        <!-- Main Content Grid -->
        <div class="main-content">
            
            <!-- Left Panel: Visual Floor Plan -->
            <section class="floor-plan-section">
                <div class="section-header">
                    <h2>üìç Visual Floor Plan</h2>
                    <div class="section-actions">
                        <button class="btn-secondary" id="btnBatchMode">
                            ‚òëÔ∏è Batch Select
                        </button>
                    </div>
                </div>

                <!-- Legend -->
                <div class="legend-bar">
                    <div class="legend-item">
                        <span class="status-badge status-good"></span>
                        <span>Good</span>
                    </div>
                    <div class="legend-item">
                        <span class="status-badge status-warning"></span>
                        <span>Warning</span>
                    </div>
                    <div class="legend-item">
                        <span class="status-badge status-defective"></span>
                        <span>Defective</span>
                    </div>
                    <div class="legend-item">
                        <span class="status-badge status-borrowed"></span>
                        <span>Borrowed</span>
                    </div>
                </div>

                <!-- Floor Plan Grid -->
                <div class="floor-plan-container" id="floorPlanContainer">
                    <!-- Lab Tabs -->
                    <div class="lab-tabs">
                        <button class="lab-tab active" data-lab="Room 209" onclick="switchLab('Room 209')">
                            üè¢ Room 209 <span class="lab-count" id="count209">40 PCs</span>
                        </button>
                        <button class="lab-tab" data-lab="Room 210" onclick="switchLab('Room 210')">
                            üè¢ Room 210 <span class="lab-count" id="count210">40 PCs</span>
                        </button>
                    </div>

                    <!-- Current Lab Display -->
                    <div class="current-lab-display">
                        <h3 id="currentLabName">Room 209</h3>
                        <p class="lab-subtitle" id="currentLabSubtitle">5 Rows √ó 8 Positions</p>
                    </div>

                    <!-- Rows will be dynamically generated -->
                    <div class="floor-plan-grid" id="floorPlanGrid">
                        <!-- Dynamically generated rows for current lab -->
                    </div>
                </div>

                <!-- Batch Actions Panel (Hidden by default) -->
                <div class="batch-actions-panel" id="batchActionsPanel" style="display: none;">
                    <div class="batch-panel-header">
                        <span id="batchSelectedCount">0 items selected</span>
                        <button class="btn-link" onclick="selectAllVisible()">Select All Visible</button>
                        <button class="btn-link" onclick="clearSelection()">Clear</button>
                    </div>
                    <div class="batch-panel-actions">
                        <button class="btn-batch btn-batch-good" onclick="batchUpdateStatus('good')">
                            ‚úÖ Mark as Good
                        </button>
                        <button class="btn-batch btn-batch-warning" onclick="batchUpdateStatus('warning')">
                            ‚ö†Ô∏è Mark as Warning
                        </button>
                        <button class="btn-batch btn-batch-defective" onclick="batchUpdateStatus('defective')">
                            ‚ùå Mark as Defective
                        </button>
                    </div>
                </div>
            </section>

            <!-- Right Panel: Item Details & Actions -->
            <section class="details-section">
                
                <!-- Quick Actions -->
                <div class="quick-actions">
                    <button class="btn-primary btn-large" id="btnAddNewItem">
                        ‚ûï Add New Item
                    </button>
                    <button class="btn-secondary btn-large" id="btnViewLowStock">
                        üì¶ Low Stock Alerts
                    </button>
                    <button class="btn-secondary btn-large" id="btnViewOverdue">
                        ‚è∞ Overdue Returns
                    </button>
                </div>

                <!-- Selected Item Details -->
                <div class="item-details-card" id="itemDetailsCard" style="display: none;">
                    <div class="card-header">
                        <h3 id="detailItemName">Item Name</h3>
                        <button class="btn-icon" onclick="closeDetails()">‚úñ</button>
                    </div>
                    
                    <div class="card-body">
                        <div class="detail-row">
                            <span class="detail-label">Serial Number:</span>
                            <span class="detail-value" id="detailSerial">-</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Status:</span>
                            <span class="status-badge" id="detailStatus">-</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Category:</span>
                            <span class="detail-value" id="detailCategory">-</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Location:</span>
                            <span class="detail-value" id="detailLocation">-</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Brand/Model:</span>
                            <span class="detail-value" id="detailBrandModel">-</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">MAC Address:</span>
                            <span class="detail-value" id="detailMAC">-</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">IP Address:</span>
                            <span class="detail-value" id="detailIP">-</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Specifications:</span>
                            <span class="detail-value" id="detailSpecs">-</span>
                        </div>
                    </div>

                    <div class="card-actions">
                        <button class="btn-action btn-edit" onclick="editItem()">
                            ‚úèÔ∏è Edit
                        </button>
                        <button class="btn-action btn-history" onclick="viewHistory()">
                            üìú View History
                        </button>
                        <button class="btn-action btn-more" onclick="showMoreActions()">
                            ‚ãÆ More
                        </button>
                    </div>
                </div>

                <!-- Asset Lifecycle History -->
                <div class="lifecycle-card" id="lifecycleCard" style="display: none;">
                    <div class="card-header">
                        <h3>üìú Asset Lifecycle History</h3>
                        <button class="btn-icon" onclick="closeLifecycle()">‚úñ</button>
                    </div>
                    <div class="card-body">
                        <div class="timeline" id="lifecycleTimeline">
                            <!-- Timeline items dynamically loaded -->
                        </div>
                    </div>
                </div>

            </section>
        </div>

    </div>

    <!-- Modal: Add/Edit Item Form -->
    <div class="modal" id="modalAddItem" style="display: none;">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2 id="modalTitle">‚ûï Add New Item</h2>
                <button class="btn-icon" onclick="closeModal('modalAddItem')">‚úñ</button>
            </div>

            <!-- Tabbed Form -->
            <div class="tab-container">
                <div class="tab-buttons">
                    <button class="tab-btn active" data-tab="basicInfo">
                        üìã Basic Info
                    </button>
                    <button class="tab-btn" data-tab="advancedTech">
                        üîß Advanced Tech
                    </button>
                    <button class="tab-btn" data-tab="stockInfo">
                        üì¶ Stock Info
                    </button>
                </div>

                <form id="itemForm">
                    <!-- Tab 1: Basic Info -->
                    <div class="tab-content active" id="tab-basicInfo">
                        <div class="form-grid">
                            <div class="form-group required">
                                <label for="inputSerial">Serial Number *</label>
                                <input type="text" id="inputSerial" class="form-input" required>
                                <small class="form-hint">Required field - cannot be empty</small>
                            </div>

                            <div class="form-group required">
                                <label for="inputName">Item Name *</label>
                                <input type="text" id="inputName" class="form-input" required>
                            </div>

                            <div class="form-group required">
                                <label for="inputCategory">Category *</label>
                                <select id="inputCategory" class="form-input" required>
                                    <option value="">-- Select Category --</option>
                                    <!-- Dynamically loaded from database -->
                                </select>
                            </div>

                            <div class="form-group required">
                                <label for="inputStatus">Status *</label>
                                <select id="inputStatus" class="form-input" required>
                                    <option value="good">‚úÖ Good</option>
                                    <option value="warning">‚ö†Ô∏è Warning</option>
                                    <option value="defective">‚ùå Defective</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="inputBrand">Brand</label>
                                <input type="text" id="inputBrand" class="form-input">
                            </div>

                            <div class="form-group">
                                <label for="inputModel">Model</label>
                                <input type="text" id="inputModel" class="form-input">
                            </div>

                            <div class="form-group">
                                <label for="inputLocation">Location</label>
                                <select id="inputLocation" class="form-input">
                                    <option value="">-- Select Location --</option>
                                    <!-- Dynamically loaded -->
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="inputPurchaseDate">Purchase Date</label>
                                <input type="date" id="inputPurchaseDate" class="form-input">
                            </div>

                            <div class="form-group form-group-full">
                                <label for="inputNotes">Notes</label>
                                <textarea id="inputNotes" class="form-input" rows="3"></textarea>
                            </div>
                        </div>
                    </div>

                    <!-- Tab 2: Advanced Tech -->
                    <div class="tab-content" id="tab-advancedTech">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="inputMAC">MAC Address</label>
                                <input type="text" id="inputMAC" class="form-input" placeholder="00:1B:44:11:3A:B7">
                            </div>

                            <div class="form-group">
                                <label for="inputIP">IP Address</label>
                                <input type="text" id="inputIP" class="form-input" placeholder="192.168.1.100">
                            </div>

                            <div class="form-group">
                                <label for="inputWarranty">Warranty Expiry</label>
                                <input type="date" id="inputWarranty" class="form-input">
                            </div>

                            <div class="form-group">
                                <label for="inputPrice">Purchase Price (‚Ç±)</label>
                                <input type="number" id="inputPrice" class="form-input" step="0.01">
                            </div>

                            <div class="form-group form-group-full">
                                <label for="inputSpecs">Technical Specifications</label>
                                <textarea id="inputSpecs" class="form-input" rows="4" placeholder="e.g., Intel i7, 16GB RAM, 512GB SSD"></textarea>
                            </div>
                        </div>
                    </div>

                    <!-- Tab 3: Stock Info -->
                    <div class="tab-content" id="tab-stockInfo">
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="inputIsConsumable">
                                    <span>This is a consumable/bulk item</span>
                                </label>
                                <small class="form-hint">Check this for items like cables, mice, etc. that are tracked in bulk</small>
                            </div>

                            <div class="form-group">
                                <label for="inputQuantity">Quantity</label>
                                <input type="number" id="inputQuantity" class="form-input" value="1" min="1">
                            </div>

                            <div class="form-group">
                                <label for="inputMinStock">Min Stock Threshold</label>
                                <input type="number" id="inputMinStock" class="form-input" value="5" min="0">
                                <small class="form-hint">Alert will show when stock falls below this level</small>
                            </div>
                        </div>
                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn-secondary" onclick="closeModal('modalAddItem')">
                            Cancel
                        </button>
                        <button type="submit" class="btn-primary btn-large">
                            üíæ Save Item
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal: More Actions Menu -->
    <div class="modal" id="modalMoreActions" style="display: none;">
        <div class="modal-content modal-small">
            <div class="modal-header">
                <h3>More Actions</h3>
                <button class="btn-icon" onclick="closeModal('modalMoreActions')">‚úñ</button>
            </div>
            <div class="modal-body">
                <div class="action-menu">
                    <button class="menu-item" onclick="reportDefect()">
                        üîß Report Defect/Repair
                    </button>
                    <button class="menu-item" onclick="recordUpgrade()">
                        ‚¨ÜÔ∏è Record Upgrade
                    </button>
                    <button class="menu-item" onclick="borrowItem()">
                        üì§ Borrow Item
                    </button>
                    <button class="menu-item" onclick="returnItem()">
                        üì• Return Item
                    </button>
                    <button class="menu-item menu-item-danger" onclick="confirmDelete()">
                        üóëÔ∏è Delete Item
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Low Stock Alerts -->
    <div class="modal" id="modalLowStock" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üì¶ Low Stock Alerts</h2>
                <button class="btn-icon" onclick="closeModal('modalLowStock')">‚úñ</button>
            </div>
            <div class="modal-body">
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Item Name</th>
                                <th>Category</th>
                                <th>Current Stock</th>
                                <th>Min Threshold</th>
                                <th>Shortage</th>
                            </tr>
                        </thead>
                        <tbody id="lowStockTableBody">
                            <!-- Dynamically loaded -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Overdue Returns -->
    <div class="modal" id="modalOverdue" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>‚è∞ Overdue Returns</h2>
                <button class="btn-icon" onclick="closeModal('modalOverdue')">‚úñ</button>
            </div>
            <div class="modal-body">
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Item Name</th>
                                <th>Student Name</th>
                                <th>Borrowed Date</th>
                                <th>Expected Return</th>
                                <th>Days Overdue</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody id="overdueTableBody">
                            <!-- Dynamically loaded -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay" style="display: none;">
        <div class="loading-spinner">
            <div class="spinner"></div>
            <p>Loading...</p>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="app.js"></script>
</body>
</html>
